--------------------[TODO]-----------------------

美化

建造器的 点击panel美化
建造的时候可以在右下角显示当前建造物品的详细信息

移动的时候会卡顿 不知道是不是cinemachine的锅
constructor 现在可以用可序列化的字典了



无人机敌人的炮塔


组件扣血

维修组件 全境封锁维修蜂巢

炮塔
    动能能量
    能量
    导弹


剩余的一些必要的基础物件:
    墙体
    护盾

    范围收集器

    引擎
    

游戏的保存和结束回港

游戏大体逻辑:
    [loop]
    1 停泊 港口 
    2 副本 获得资源
        副本中采用坚持3分钟 应对不断来袭的敌人 获得资源
    3 港口 解锁科技 购买buff 

场景切换

panel 动画

接入steam的sdk
 
costPanel 可以做一个折叠 动画

---------------------[OnProcess]----------------------



new
港口
港口可以购买解锁新的升级和蓝图

更改玩法
先去做炮塔 子弹还是从仓库中直接拿 所以先搓一个炮塔的机器

比例先做成1:4

大炮子弹 AOE 爆炸




---------------------[Done]---------------------------------


2024-2-23
确认了生产线游戏模式的改动

更改了子弹的逻辑 提取出了策略模式

new
无限弹药机
大炮

fix
更改了turret 现在能从仓库提取弹药了
INF机器中间的图标显示修改为依赖sprite X 改为sprite就不能用hdr了

2024-2-21 and 22
考虑减法
头脑风暴 设计新玩法
线缆点对点运输 X
删除传送带 直接进仓库

fix
EventCenter有时候物体消失了没有把事件注销 增加try catch一定程度避免程序被卡死

fix
保存的时候只能保存物体是什么, 不能保存物体的具体数据 比如制造机选用的是哪个配方

4.13.0
2024-2-20
new
简单关卡跳转
添加了 costpanel 小动画
spceport onlyWASDCameraFacade 控制太空港相机移动
太空港现在也可以建造了



fix
shipbuildcontroller 对于cost panel的管理逻辑修改
constructor 选择配方的panel 由于drop down 没有在最后所以点不到 (之后可以用新的dropdwon 之前视频那个)
fix
建造模式退出的时候如果 选取了东西然后直接按e退出建造模式 显示cost的ui还是会在虚影是不见了
fix
保存添加了一个extra data 来保存比如制造机的配方 现在可以保存了但是还不能读取


4.12.0
2024-2-19
fix
costItem ui 会导致 unity 光线投射目标改变从变回 build action map

new
添加了text animator
港口显示资源和进入关卡选择
完善了port场景 点击左下角打开关卡选择 (之后要做动画)
差一个跳转

2024-2-18
unitInfoModel 负责索引全部的unitSO
itemInfoModel 负责索引全部的itemSO
通用 工具类增加了可以log 带类名和方法名的方法 

fix
飞船有时候save 的时候没有任何组件
bug 原因是load的时候组件生成没有绑定到 

2024-2-17
建立了Player model单例
uml类图
https://www.processon.com/diagraming/65d0570cc928476241774147

fix
player model 结构改变



2024-2-2

new
本地存档内容
ship memento
保存使用json 但是如果直接保存的Vector2Int 当作 grid 的位置 会把模长那些全部保存过去 还是直接用 x 和 y 吧

playerMemento
保存飞船也保存仓库

读取
战斗场景读取
逻辑: 暂时的
先是game manager需要读取玩家存档 PlayerMemento
读取了之后触发读取EventCenter事件 PlayerMementoLoad
飞船带有事件回调会根据事件中的值来加载飞船

飞船要根据shipmemento 里面的值来加载数据
就需要一个model类字典来管理所有的unitSO 负责根据存档里面的unitname来索引全部的

2024-2-1
保存飞船和仓库的json

2024-1-31

new
事件中心写了一个 : EventCenter

建造的时候旁边显示要建造需要什么东西 (这个需要用事件中心吗?)
显示的面板 监听 shipbuildController 的curbuild 如果curbuild 换了就 refresh
并且监听inventory的inventory change 如果inventory里面有物品增加或者减少也会显示在建造的详细面板上面
没用事件中心

fix
建造的时候不能删除


2024-1-30

new
得更改交互逻辑 不然一按右键这边直接退出了建造模式 
按下 e 建造模式 done
    旁边的面板可以选择建造什么  done
    左键建造右键清空建造的选择  done
    如果手上没有东西此时也能check detail (鼠标左键) done
再次按下 e 退出建造模式 done

new
改变 curbuild 了之后 ui也需要一起改变:
在build controller 中添加一个 event 当cur build unit 改变的时候触发
并且将 ui 的设置选择flag的添加进去

fix
shadowoerfreame 改为每次判定需不需要显示可以保证万无一失

fix
如果在ui界面点击后也会导致建造
新建了一个input action map 叫ui 从而可以关闭执行回调
以及 AutoSwitchInputAction 鼠标移动进去的时候改变map为 ui 退出的hi后改变为 进入前记录的




2024-1-29

new
开启建造模式后, 我需要视角不在随鼠标晃动而晃动而是通过wasd来移动视角

Camera1:
looktargeByMouse 
在一般移动模式下面 视角不但跟随飞船 而且还需要根据鼠标的移动可以进行观察
可以进行zoom 放大缩小

Camera2:
建造模式或者停靠港口只能进行编辑的时候使用 WASD 或者鼠标移动到边界的时候移动视角
也可以进行zoom 放大缩小

切换想达到的效果 按下e键之后 镜头切换到现在屏幕的中间(looktarget) 并且上下左右与飞船对齐
切换回来则是反过来target直接根据鼠标位置做移动 并且上下左右与世界对齐   =-

分开两个camera / 单独对一个camera进行调整参数?
切换的时候两个相机的参数有的会不一样 玩家拉大了时候开始编辑又需要缩小
一个:
切换的时候
把aim 从donothing 变成same 并且只需要
一个的方法遇到障碍 无法改变aim 从donothing 到 same follow

完成的:
还是用两个的来完成

fix
没有打开建造模式的时候不再显示gridobject 的坐标改为打开后在现实 (现在先把这个去掉了 之后用textpro更清晰一点)
(按理说应该一直不显示 或者保留让玩家选应该显示与否)
INF 资源机器的贴图生成有问题 会根据世界坐标系来进行生成




2024-01-28
建造与建造面板
建造面板 进入建设模式打开 退出建造模式关闭
建造面板, 可以通过点击上面的unit来选择建造什么unit
建造面板选择符号动画
建造需要一个获取现在能建造的东西 先用SO来实现

两格的机械臂 (未测试)

2024-01-01 ~ 2024-01-28
未记录